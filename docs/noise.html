<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.11.6" />
<meta name="google-site-verification" content="aB8LkQegj94_TJPdrcJm2ldIRWyXY82Jp24Gtkdgyn0" />
<title>vipy.noise API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>vipy.noise</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L1-L355" class="git-link">Browse git</a>
</summary>
<pre><code class="python">import vipy
import numpy as np
from io import BytesIO
import PIL
import random
import math


vipy.util.try_import(&#39;torchvision.transforms&#39;, &#39;torchvision&#39;); import torchvision.transforms
vipy.util.try_import(&#39;torchvision.transforms.v2&#39;, &#39;torchvision&#39;); import torchvision.transforms.v2
vipy.util.try_import(&#39;skimage&#39;, &#39;scikit-image&#39;); import skimage.transform
vipy.util.try_import(&#39;cv2&#39;, &#39;opencv-python&#39;); import cv2


# GEOMETRIC
def left_shear(im, s, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert s &gt;= 0
    
    T = vipy.geometry.affine_transform(txy=(-im.width()//2, -im.height()/2))
    A = np.dot(vipy.geometry.affine_transform(ky=s), T)
    A = np.dot(np.linalg.inv(T), A)
    return im.load().affine_transform(A, border=border).mat2gray(0,255)

def right_shear(im, s, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert s &gt;= 0
    
    T = vipy.geometry.affine_transform(txy=(-im.width()//2, -im.height()/2))
    A = np.dot(vipy.geometry.affine_transform(ky=-s), T)
    A = np.dot(np.linalg.inv(T), A)
    return im.load().affine_transform(A, border=border).mat2gray(0,255)

def rotate(im, rad=None, deg=None, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert rad is not None or deg is not None
    
    r = rad if rad is not None else (deg*np.pi/180.0)
    T = vipy.geometry.affine_transform(txy=(-im.width()//2, -im.height()/2))
    A = np.dot(vipy.geometry.affine_transform(r=r), T)
    A = np.dot(np.linalg.inv(T), A)
    return im.load().affine_transform(A, border=border).mat2gray(0,255)

def barrel(im):
    assert isinstance(im, vipy.image.Image)    
    (width, height) = (im.width(), im.height())
    distCoeff = np.zeros((4,1),np.float64)
    
    k1 = 0.1 + 0.05*np.random.randn()
    k2 = 0.1 + 0.05*np.random.randn()
    p1 = 0.1 + 0.05*np.random.randn()
    p2 = 0.1 + 0.05*np.random.randn()
    
    distCoeff[0,0] = k1;
    distCoeff[1,0] = k2;
    distCoeff[2,0] = p1;
    distCoeff[3,0] = p2;
    
    # assume unit matrix for camera
    cam = np.eye(3,dtype=np.float32)

    cam[0,2] = width/2.0  # define center x
    cam[1,2] = height/2.0 # define center y
    cam[0,0] = 600.        # define focal length x
    cam[1,1] = 600.        # define focal length y

    # here the undistortion will be computed
    dst = cv2.undistort(im.load().array(),cam,distCoeff)

    return im.array(dst)

def left_swirl(im, center=None, strength=2):
    assert isinstance(im, vipy.image.Image)        
    return im.array(np.array(skimage.transform.swirl(im.load().array(), rotation=0, strength=strength, center=center, radius=im.maxdim())).astype(np.float32)).mat2gray(0,1)

def right_swirl(im, strength=2, center=None):
    assert isinstance(im, vipy.image.Image)            
    return im.array(np.array(skimage.transform.swirl(im.load().fliplr().array(), rotation=0, center=center, strength=strength, radius=im.maxdim())).astype(np.float32)).mat2gray(0,1).fliplr()

def horizontal_mirror(im):
    assert isinstance(im, vipy.image.Image)            
    img = im.load().array()
    (i,j) = (im.width()//2 if vipy.math.iseven(im.width()) else (im.width()//2)+1, im.width()//2)    
    img[:,i:] = np.fliplr(img[:,0:j])
    return im.array(img)

def vertical_mirror(im):
    assert isinstance(im, vipy.image.Image)            
    img = im.load().array()
    (i,j) = (im.height()//2 if vipy.math.iseven(im.height()) else (im.height()//2)+1, im.height()//2)
    img[i:,:] = np.flipud(img[0:j, :])
    return im.array(img)

def vertical_motion_blur(im, kernel_size):
    assert isinstance(im, vipy.image.Image)
    kernel_v = np.zeros((kernel_size, kernel_size) )  
    kernel_v[:, int((kernel_size - 1)/2)] = np.ones(kernel_size)  
    kernel_v /= kernel_size
    return im.load().map(lambda img: cv2.filter2D(img, -1, kernel_v)).mat2gray(0,255).colorspace(&#39;float&#39;)

def horizontal_motion_blur(im, kernel_size):
    assert isinstance(im, vipy.image.Image)    
    kernel_h = np.zeros((kernel_size, kernel_size) )  
    kernel_h[int((kernel_size - 1)/2), :] = np.ones(kernel_size)
    kernel_h /= kernel_size
    return im.load().map(lambda img: cv2.filter2D(img, -1, kernel_h)).mat2gray(0,255).colorspace(&#39;float&#39;)

def ghost(im, txr=5, tyr=5, txg=-5, tyg=-5, txb=5, tyb=-5):
    assert isinstance(im, vipy.image.Image)
    (imc,imz) = (im.clone().load(), im.clone().load().zeros())
    img = imz.numpy()
    img[:,:,0] = translate(imc.red(), txr, tyr).load().array()
    img[:,:,1] = translate(imc.green(), txg, tyg).load().array()
    img[:,:,2] = translate(imc.blue(), txb, tyb).load().array()
    return imz

def crop(im, s=0.8):
    return im.clone().crop(vipy.geometry.BoundingBox(xmin=random.randint(0, int((1-s)*im.width())), ymin=random.randint(0, int((1-s)*im.height())), width=math.ceil(s*im.width()), height=math.ceil(s*im.height()))).resize(height=im.height(), width=im.width())

def fliplr(im):
    return im.load().fliplr()

def flipud(im):
    return im.load().flipud()

def rot90cw(im):
    return im.load().rot90cw()

def rot90ccw(im):
    return im.load().rot90ccw()

def translate(im, dx, dy): 
    &#34;&#34;&#34;Translate by (dx,dy) pixels, with zero border handling&#34;&#34;&#34;
    assert isinstance(im, vipy.image.Image)
    return im.load().padcrop(im.imagebox().translate(dx,dy))

def isotropic_scale(im, s, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert s &gt; 0

    (W,H) = (im.width(), im.height())
    return im.load().rescale(s).padcrop(vipy.geometry.BoundingBox(centroid=(im.width()//2, im.height()//2), width=W, height=H))

def zoom(im, s, zx=None, zy=None, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert s &gt; 0

    (zx, zy) = ((-im.width()/2) if zx is None else -zx, (-im.height()/2) if zy is None else -zy)    
    return isotropic_scale(translate(im, zx, zy), s)


# &lt;PHOTOMETRIC&gt;
def blur(im, sigma):
    assert isinstance(im, vipy.image.Image)
    imblur = im.rgb().blur(sigma=sigma)
    return imblur.greyscale().colorspace_like(im) if im.channels() == 1 else imblur.colorspace_like(im)

def salt_and_pepper(im, p):
    assert isinstance(im, vipy.image.Image)    
    assert p &gt;= 0 and p &lt;= 1
    
    W = np.array(np.random.rand( im.height(), im.width(), 1 ) &gt; p).astype(np.float32)
    B = np.array(np.random.rand( im.height(), im.width(), 1 ) &gt; p).astype(np.float32)    
    return im.load().float().mat2gray().map(lambda x: np.multiply(x, W) + 1-W).map(lambda x: np.multiply(x, B)).colorspace_like(im)

def jpeg_compression(im, quality):
    assert isinstance(im, vipy.image.Image)
    assert quality &gt;= 0 and quality &lt;= 95
    
    out = BytesIO()
    im.load().pil().save(out, format=&#39;jpeg&#39;, quality=quality)
    out.seek(0)
    return im.load().array(np.array(PIL.Image.open(out))).mat2gray(0,255)

def bit_depth(im, d):
    assert d&gt;=1 and d&lt;=8    
    return im.array(np.array(PIL.ImageOps.posterize(im.load().pil(), d)))

def solarize(im, t):
    assert t&gt;=0 and t&lt;=255    
    return im.array(np.array(PIL.ImageOps.solarize(im.load().pil(), t)))

def permute_color_channels(im, order):
    assert sorted(order) == [0,1,2]
    return im.array(np.array(im.load().rgb())[:,:,order])

def greyscale(im):
    assert isinstance(im, vipy.image.Image)    
    return im.clone().load().greyscale().colorspace_like(im)

def bgr(im):
    assert isinstance(im, vipy.image.Image)    
    return im.array(im.bgr().load().array()).colorspace(&#39;rgb&#39;)

def hot(im):
    assert isinstance(im, vipy.image.Image)    
    return im.hot().load().rgb()

def rainbow(im):
    assert isinstance(im, vipy.image.Image)    
    return im.rainbow().load().rgb()

def saturate(im, low, high):
    assert isinstance(im, vipy.image.Image)    
    return im.saturate(low, high)

def colorjitter(im):
    transform = torchvision.transforms.ColorJitter(brightness=(0.5,1.5),contrast=(1),saturation=(0.5,1.5),hue=(-0.1,0.1))
    return im.array(np.array(transform(im.pil())))

def sharpness(im, f):
    return im.array(np.array(torchvision.transforms.v2.functional.adjust_sharpness(im.load().torch(&#39;CHW&#39;), f).permute(1,2,0)))

def gamma(im, f):
    return im.array(np.array(torchvision.transforms.v2.functional.adjust_gamma(im.load().torch(&#39;CHW&#39;), f).permute(1,2,0)))

def autocontrast(im):
    return im.mat2gray().rgb()

def edge(im):
    assert isinstance(im, vipy.image.Image)    
    return im.array(np.array(im.luminance().pil().filter(PIL.ImageFilter.FIND_EDGES))).colorspace(&#39;lum&#39;).colorspace_like(im)

def emboss(im): 
    assert isinstance(im, vipy.image.Image)   
    return im.array(np.array(im.luminance().pil().filter(PIL.ImageFilter.EMBOSS))).colorspace(&#39;lum&#39;).colorspace_like(im)

def darken(im, g): 
    assert isinstance(im, vipy.image.Image)   
    return im.gain(g).mat2gray(0, 255).colorspace(&#39;float&#39;)

def negative(im):
    assert isinstance(im, vipy.image.Image)    
    return im.load().array(1-im.load().mat2gray(0,255).array()).colorspace(&#39;float&#39;)

def scan_lines(im):
    assert isinstance(im, vipy.image.Image)
    imc = im.load()
    imc._array[::2, :] = 0
    return imc

def additive_gaussian_noise(im, sigma=0.1):
    assert isinstance(im, vipy.image.Image)            
    return im.float().map(lambda img: img + max(sigma*im.maxpixel(), sigma)*np.random.randn(img.shape[0], img.shape[1], im.channels()).astype(np.float32)).saturate(0,255).mat2gray(0,255).colorspace(&#39;float&#39;)



class Noise():
    def __init__(self, magnitude=0.25, provenance=False, register=None, deregister=[&#39;hot&#39;,&#39;rainbow&#39;,&#39;vertical_mirror&#39;,&#39;flipud&#39;,&#39;rot90cw&#39;,&#39;rot90ccw&#39;]):

        n = magnitude
        (shear, dx, dy, rot, z, border, sigma, gain) = (n*0.25, n*0.15, n*0.15, n*25, n*0.2, &#39;replicate&#39;, 1.0, 0.5)
        
        self._provenance = provenance        
        self._registry = {&#39;blur&#39;: lambda im: blur(im, sigma=n*random.uniform(im.mindim()*0.01, im.mindim()*0.05)),
                          &#39;salt_and_pepper&#39;: lambda im: salt_and_pepper(im, n*0.1*random.random()),
                          &#39;jpeg_compression&#39;: lambda im: jpeg_compression(im, random.randint(50,95-int(10*n))),
                          &#39;greyscale&#39;: lambda im: greyscale(im),
                          &#39;bgr&#39;: lambda im: bgr(im),
                          &#39;hot&#39;: lambda im: hot(im),
                          &#39;rainbow&#39;: lambda im: rainbow(im),
                          &#39;saturate&#39;: lambda im: saturate(im, random.randint(0, 64), random.randint(255-64, 255)),
                          &#39;edge&#39;: lambda im: edge(im),
                          &#39;emboss&#39;: lambda im: emboss(im),
                          &#39;darken&#39;: lambda im: darken(im, 1-n*random.random()),
                          &#39;negative&#39;: lambda im: negative(im),
                          &#39;scan_lines&#39;: lambda im: scan_lines(im),
                          &#39;additive_gaussian_noise&#39;: lambda im: additive_gaussian_noise(im, np.random.uniform(n*0.01, n*0.5)),
                          &#39;translate&#39;: lambda im, dx=dx, dy=dy, b=border: translate(im, np.random.uniform(-dx,dx), np.random.uniform(-dy,dy)),                          
                          &#39;horizontal_motion_blur&#39;: lambda im: horizontal_motion_blur(im, random.randint(math.ceil(im.mindim()*0.05*n), math.ceil(im.mindim()*0.15*n))),
                          &#39;vertical_motion_blur&#39;: lambda im: vertical_motion_blur(im, random.randint(math.ceil(im.mindim()*0.05*n), math.ceil(im.mindim()*0.15*n))),                          
                          &#39;barrel&#39;: lambda im: barrel(im),
                          &#39;left_swirl&#39;: lambda im: left_swirl(im, center=(random.randint(0, im.mindim()), random.randint(0,im.mindim())), strength=n),
                          &#39;right_swirl&#39;: lambda im: right_swirl(im, center=(random.randint(0, im.mindim()), random.randint(0, im.mindim())), strength=n),
                          &#39;horizontal_mirror&#39;: lambda im: horizontal_mirror(im),
                          &#39;vertical_mirror&#39;: lambda im: vertical_mirror(im),
                          &#39;left_shear&#39;: lambda im, s=shear, b=border: left_shear(im, np.random.uniform(0,s), border=b),
                          &#39;right_shear&#39;: lambda im, s=shear, b=border: right_shear(im, np.random.uniform(0,s), border=b),
                          &#39;rotate&#39;: lambda im, deg=rot, b=border: rotate(im, deg=np.random.uniform(-deg,deg), border=b),
                          &#39;isotropic_scale&#39;: lambda im, z=z, b=border: isotropic_scale(im, np.random.uniform(1.0-z, 1.0+z)),
                          &#39;ghost&#39;: lambda im: ghost(im,
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n))),
                          &#39;bit_depth&#39;: lambda im: bit_depth(im, random.randint(1,7)),
                          &#39;permute_color_channels&#39;: lambda im: permute_color_channels(im, random.sample([[0,2,1],[1,0,2],[1,2,0],[2,0,1],[2,1,0]], 1)[0]),
                          &#39;fliplr&#39;: lambda im: fliplr(im),
                          &#39;flipud&#39;: lambda im: flipud(im),
                          &#39;rot90cw&#39;: lambda im: rot90cw(im),
                          &#39;rot90ccw&#39;: lambda im: rot90ccw(im),
                          &#39;solarize&#39;: lambda im: solarize(im, random.randint(32, 255-32)),
                          &#39;colorjitter&#39;: lambda im: colorjitter(im),
                          &#39;autocontrast&#39;: lambda im: autocontrast(im),
                          &#39;sharpness&#39;: lambda im: sharpness(im, 10*random.random()),
                          &#39;gamma&#39;: lambda im: gamma(im, random.random()+0.5),
                          &#39;crop&#39;: lambda im: crop(im, 1-0.2*random.random()),
                          }

        if deregister is not None:
            self._registry = {k:v for (k,v) in self._registry.items() if k not in deregister}                    
        if register is not None:
            self._registry = {k:v for (k,v) in self._registry.items() if k in register}        

    def transformations(self):
        return list(self._registry.keys())

    def random_transformation(self, im):
        return self.transform(im, vipy.util.takeone(self.transformations()))
        
    def transform(self, im, transform):
        assert isinstance(im, vipy.image.Image)
        assert transform in self.transformations()

        imd = self._registry[transform](im.clone().load())
        if self._provenance:
            imd.setattribute(&#39;vipy.noise&#39;, transform)
        return imd

    def montage(self, im):
        return vipy.visualize.montage([self.transform(im.clone().centersquare(), k) for k in self.transformations()], 256, 256)
    
    def __call__(self, im):
        assert isinstance(im, vipy.image.Image) or all(isinstance(x, vipy.image.Image) for x in im), &#34;singletons or batches required&#34;
        return self.random_transformation(im) if isinstance(im, vipy.image.Image) else tuple([self.random_transformation(x) for x in im])


class RandomCrop(Noise):
    def __init__(self, magnitude=1, provenance=False):
        super().__init__(magnitude=magnitude, provenance=provenance, register=[&#39;translate&#39;, &#39;isotropic_scale&#39;, &#39;crop&#39;])
    
class Geometric(Noise):
    def __init__(self, magnitude=0.25, provenance=False):
        super().__init__(magnitude=magnitude, provenance=provenance,
                         register=[&#39;translate&#39;, &#39;horizontal_motion_blur&#39;, &#39;vertical_motion_blur&#39;, &#39;barrel&#39;,
                                   &#39;left_swirl&#39;, &#39;right_swirl&#39;,&#39;horizontal_mirror&#39;,&#39;left_shear&#39;,&#39;right_shear&#39;,
                                   &#39;rotate&#39;,&#39;isotropic_scale&#39;,&#39;fliplr&#39;,&#39;crop&#39;])
class Photometric(Noise):
    def __init__(self, magnitude=0.25, provenance=False):
        super().__init__(magnitude=magnitude, provenance=provenance,
                         register=[&#39;blur&#39;, &#39;salt_and_pepper&#39;, &#39;jpeg_compression&#39;, &#39;greyscale&#39;, &#39;bgr&#39;, &#39;hot&#39;,&#39;saturate&#39;,&#39;edge&#39;,&#39;emboss&#39;,
                                   &#39;darken&#39;,&#39;negative&#39;,&#39;scan_lines&#39;,&#39;additive_gaussian_noise&#39;,&#39;bit_depth&#39;,&#39;permute_color_channels&#39;,&#39;solarize&#39;,
                                   &#39;colorjitter&#39;,&#39;autocontrast&#39;, &#39;sharpness&#39;, &#39;gamma&#39;, &#39;ghost&#39;])
class Perturbation(Noise):
    def __init__(self, magnitude=0.5, provenance=False):
        super().__init__(magnitude=magnitude, provenance=provenance, register=[&#39;translate&#39;, &#39;isotropic_scale&#39;, &#39;crop&#39;, &#39;blur&#39;, &#39;additive_gaussian_noise&#39;]) 
        

geometric = Geometric(provenance=True)
photometric = Photometric(provenance=True)
perturbation = Perturbation(provenance=True)
randomcrop = RandomCrop(provenance=True)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="vipy.noise.additive_gaussian_noise"><code class="name flex">
<span>def <span class="ident">additive_gaussian_noise</span></span>(<span>im, sigma=0.1)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L242-L244" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def additive_gaussian_noise(im, sigma=0.1):
    assert isinstance(im, vipy.image.Image)            
    return im.float().map(lambda img: img + max(sigma*im.maxpixel(), sigma)*np.random.randn(img.shape[0], img.shape[1], im.channels()).astype(np.float32)).saturate(0,255).mat2gray(0,255).colorspace(&#39;float&#39;)</code></pre>
</details>
</dd>
<dt id="vipy.noise.autocontrast"><code class="name flex">
<span>def <span class="ident">autocontrast</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L217-L218" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def autocontrast(im):
    return im.mat2gray().rgb()</code></pre>
</details>
</dd>
<dt id="vipy.noise.barrel"><code class="name flex">
<span>def <span class="ident">barrel</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L44-L70" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def barrel(im):
    assert isinstance(im, vipy.image.Image)    
    (width, height) = (im.width(), im.height())
    distCoeff = np.zeros((4,1),np.float64)
    
    k1 = 0.1 + 0.05*np.random.randn()
    k2 = 0.1 + 0.05*np.random.randn()
    p1 = 0.1 + 0.05*np.random.randn()
    p2 = 0.1 + 0.05*np.random.randn()
    
    distCoeff[0,0] = k1;
    distCoeff[1,0] = k2;
    distCoeff[2,0] = p1;
    distCoeff[3,0] = p2;
    
    # assume unit matrix for camera
    cam = np.eye(3,dtype=np.float32)

    cam[0,2] = width/2.0  # define center x
    cam[1,2] = height/2.0 # define center y
    cam[0,0] = 600.        # define focal length x
    cam[1,1] = 600.        # define focal length y

    # here the undistortion will be computed
    dst = cv2.undistort(im.load().array(),cam,distCoeff)

    return im.array(dst)</code></pre>
</details>
</dd>
<dt id="vipy.noise.bgr"><code class="name flex">
<span>def <span class="ident">bgr</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L191-L193" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def bgr(im):
    assert isinstance(im, vipy.image.Image)    
    return im.array(im.bgr().load().array()).colorspace(&#39;rgb&#39;)</code></pre>
</details>
</dd>
<dt id="vipy.noise.bit_depth"><code class="name flex">
<span>def <span class="ident">bit_depth</span></span>(<span>im, d)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L175-L177" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def bit_depth(im, d):
    assert d&gt;=1 and d&lt;=8    
    return im.array(np.array(PIL.ImageOps.posterize(im.load().pil(), d)))</code></pre>
</details>
</dd>
<dt id="vipy.noise.blur"><code class="name flex">
<span>def <span class="ident">blur</span></span>(<span>im, sigma)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L153-L156" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def blur(im, sigma):
    assert isinstance(im, vipy.image.Image)
    imblur = im.rgb().blur(sigma=sigma)
    return imblur.greyscale().colorspace_like(im) if im.channels() == 1 else imblur.colorspace_like(im)</code></pre>
</details>
</dd>
<dt id="vipy.noise.colorjitter"><code class="name flex">
<span>def <span class="ident">colorjitter</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L207-L209" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def colorjitter(im):
    transform = torchvision.transforms.ColorJitter(brightness=(0.5,1.5),contrast=(1),saturation=(0.5,1.5),hue=(-0.1,0.1))
    return im.array(np.array(transform(im.pil())))</code></pre>
</details>
</dd>
<dt id="vipy.noise.crop"><code class="name flex">
<span>def <span class="ident">crop</span></span>(<span>im, s=0.8)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L117-L118" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def crop(im, s=0.8):
    return im.clone().crop(vipy.geometry.BoundingBox(xmin=random.randint(0, int((1-s)*im.width())), ymin=random.randint(0, int((1-s)*im.height())), width=math.ceil(s*im.width()), height=math.ceil(s*im.height()))).resize(height=im.height(), width=im.width())</code></pre>
</details>
</dd>
<dt id="vipy.noise.darken"><code class="name flex">
<span>def <span class="ident">darken</span></span>(<span>im, g)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L228-L230" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def darken(im, g): 
    assert isinstance(im, vipy.image.Image)   
    return im.gain(g).mat2gray(0, 255).colorspace(&#39;float&#39;)</code></pre>
</details>
</dd>
<dt id="vipy.noise.edge"><code class="name flex">
<span>def <span class="ident">edge</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L220-L222" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def edge(im):
    assert isinstance(im, vipy.image.Image)    
    return im.array(np.array(im.luminance().pil().filter(PIL.ImageFilter.FIND_EDGES))).colorspace(&#39;lum&#39;).colorspace_like(im)</code></pre>
</details>
</dd>
<dt id="vipy.noise.emboss"><code class="name flex">
<span>def <span class="ident">emboss</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L224-L226" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def emboss(im): 
    assert isinstance(im, vipy.image.Image)   
    return im.array(np.array(im.luminance().pil().filter(PIL.ImageFilter.EMBOSS))).colorspace(&#39;lum&#39;).colorspace_like(im)</code></pre>
</details>
</dd>
<dt id="vipy.noise.fliplr"><code class="name flex">
<span>def <span class="ident">fliplr</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L120-L121" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def fliplr(im):
    return im.load().fliplr()</code></pre>
</details>
</dd>
<dt id="vipy.noise.flipud"><code class="name flex">
<span>def <span class="ident">flipud</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L123-L124" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def flipud(im):
    return im.load().flipud()</code></pre>
</details>
</dd>
<dt id="vipy.noise.gamma"><code class="name flex">
<span>def <span class="ident">gamma</span></span>(<span>im, f)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L214-L215" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def gamma(im, f):
    return im.array(np.array(torchvision.transforms.v2.functional.adjust_gamma(im.load().torch(&#39;CHW&#39;), f).permute(1,2,0)))</code></pre>
</details>
</dd>
<dt id="vipy.noise.ghost"><code class="name flex">
<span>def <span class="ident">ghost</span></span>(<span>im, txr=5, tyr=5, txg=-5, tyg=-5, txb=5, tyb=-5)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L108-L115" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def ghost(im, txr=5, tyr=5, txg=-5, tyg=-5, txb=5, tyb=-5):
    assert isinstance(im, vipy.image.Image)
    (imc,imz) = (im.clone().load(), im.clone().load().zeros())
    img = imz.numpy()
    img[:,:,0] = translate(imc.red(), txr, tyr).load().array()
    img[:,:,1] = translate(imc.green(), txg, tyg).load().array()
    img[:,:,2] = translate(imc.blue(), txb, tyb).load().array()
    return imz</code></pre>
</details>
</dd>
<dt id="vipy.noise.greyscale"><code class="name flex">
<span>def <span class="ident">greyscale</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L187-L189" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def greyscale(im):
    assert isinstance(im, vipy.image.Image)    
    return im.clone().load().greyscale().colorspace_like(im)</code></pre>
</details>
</dd>
<dt id="vipy.noise.horizontal_mirror"><code class="name flex">
<span>def <span class="ident">horizontal_mirror</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L80-L85" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def horizontal_mirror(im):
    assert isinstance(im, vipy.image.Image)            
    img = im.load().array()
    (i,j) = (im.width()//2 if vipy.math.iseven(im.width()) else (im.width()//2)+1, im.width()//2)    
    img[:,i:] = np.fliplr(img[:,0:j])
    return im.array(img)</code></pre>
</details>
</dd>
<dt id="vipy.noise.horizontal_motion_blur"><code class="name flex">
<span>def <span class="ident">horizontal_motion_blur</span></span>(<span>im, kernel_size)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L101-L106" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def horizontal_motion_blur(im, kernel_size):
    assert isinstance(im, vipy.image.Image)    
    kernel_h = np.zeros((kernel_size, kernel_size) )  
    kernel_h[int((kernel_size - 1)/2), :] = np.ones(kernel_size)
    kernel_h /= kernel_size
    return im.load().map(lambda img: cv2.filter2D(img, -1, kernel_h)).mat2gray(0,255).colorspace(&#39;float&#39;)</code></pre>
</details>
</dd>
<dt id="vipy.noise.hot"><code class="name flex">
<span>def <span class="ident">hot</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L195-L197" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def hot(im):
    assert isinstance(im, vipy.image.Image)    
    return im.hot().load().rgb()</code></pre>
</details>
</dd>
<dt id="vipy.noise.isotropic_scale"><code class="name flex">
<span>def <span class="ident">isotropic_scale</span></span>(<span>im, s, border='zero')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L137-L142" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def isotropic_scale(im, s, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert s &gt; 0

    (W,H) = (im.width(), im.height())
    return im.load().rescale(s).padcrop(vipy.geometry.BoundingBox(centroid=(im.width()//2, im.height()//2), width=W, height=H))</code></pre>
</details>
</dd>
<dt id="vipy.noise.jpeg_compression"><code class="name flex">
<span>def <span class="ident">jpeg_compression</span></span>(<span>im, quality)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L166-L173" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def jpeg_compression(im, quality):
    assert isinstance(im, vipy.image.Image)
    assert quality &gt;= 0 and quality &lt;= 95
    
    out = BytesIO()
    im.load().pil().save(out, format=&#39;jpeg&#39;, quality=quality)
    out.seek(0)
    return im.load().array(np.array(PIL.Image.open(out))).mat2gray(0,255)</code></pre>
</details>
</dd>
<dt id="vipy.noise.left_shear"><code class="name flex">
<span>def <span class="ident">left_shear</span></span>(<span>im, s, border='zero')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L16-L23" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def left_shear(im, s, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert s &gt;= 0
    
    T = vipy.geometry.affine_transform(txy=(-im.width()//2, -im.height()/2))
    A = np.dot(vipy.geometry.affine_transform(ky=s), T)
    A = np.dot(np.linalg.inv(T), A)
    return im.load().affine_transform(A, border=border).mat2gray(0,255)</code></pre>
</details>
</dd>
<dt id="vipy.noise.left_swirl"><code class="name flex">
<span>def <span class="ident">left_swirl</span></span>(<span>im, center=None, strength=2)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L72-L74" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def left_swirl(im, center=None, strength=2):
    assert isinstance(im, vipy.image.Image)        
    return im.array(np.array(skimage.transform.swirl(im.load().array(), rotation=0, strength=strength, center=center, radius=im.maxdim())).astype(np.float32)).mat2gray(0,1)</code></pre>
</details>
</dd>
<dt id="vipy.noise.negative"><code class="name flex">
<span>def <span class="ident">negative</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L232-L234" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def negative(im):
    assert isinstance(im, vipy.image.Image)    
    return im.load().array(1-im.load().mat2gray(0,255).array()).colorspace(&#39;float&#39;)</code></pre>
</details>
</dd>
<dt id="vipy.noise.permute_color_channels"><code class="name flex">
<span>def <span class="ident">permute_color_channels</span></span>(<span>im, order)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L183-L185" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def permute_color_channels(im, order):
    assert sorted(order) == [0,1,2]
    return im.array(np.array(im.load().rgb())[:,:,order])</code></pre>
</details>
</dd>
<dt id="vipy.noise.rainbow"><code class="name flex">
<span>def <span class="ident">rainbow</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L199-L201" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def rainbow(im):
    assert isinstance(im, vipy.image.Image)    
    return im.rainbow().load().rgb()</code></pre>
</details>
</dd>
<dt id="vipy.noise.right_shear"><code class="name flex">
<span>def <span class="ident">right_shear</span></span>(<span>im, s, border='zero')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L25-L32" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def right_shear(im, s, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert s &gt;= 0
    
    T = vipy.geometry.affine_transform(txy=(-im.width()//2, -im.height()/2))
    A = np.dot(vipy.geometry.affine_transform(ky=-s), T)
    A = np.dot(np.linalg.inv(T), A)
    return im.load().affine_transform(A, border=border).mat2gray(0,255)</code></pre>
</details>
</dd>
<dt id="vipy.noise.right_swirl"><code class="name flex">
<span>def <span class="ident">right_swirl</span></span>(<span>im, strength=2, center=None)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L76-L78" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def right_swirl(im, strength=2, center=None):
    assert isinstance(im, vipy.image.Image)            
    return im.array(np.array(skimage.transform.swirl(im.load().fliplr().array(), rotation=0, center=center, strength=strength, radius=im.maxdim())).astype(np.float32)).mat2gray(0,1).fliplr()</code></pre>
</details>
</dd>
<dt id="vipy.noise.rot90ccw"><code class="name flex">
<span>def <span class="ident">rot90ccw</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L129-L130" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def rot90ccw(im):
    return im.load().rot90ccw()</code></pre>
</details>
</dd>
<dt id="vipy.noise.rot90cw"><code class="name flex">
<span>def <span class="ident">rot90cw</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L126-L127" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def rot90cw(im):
    return im.load().rot90cw()</code></pre>
</details>
</dd>
<dt id="vipy.noise.rotate"><code class="name flex">
<span>def <span class="ident">rotate</span></span>(<span>im, rad=None, deg=None, border='zero')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L34-L42" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def rotate(im, rad=None, deg=None, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert rad is not None or deg is not None
    
    r = rad if rad is not None else (deg*np.pi/180.0)
    T = vipy.geometry.affine_transform(txy=(-im.width()//2, -im.height()/2))
    A = np.dot(vipy.geometry.affine_transform(r=r), T)
    A = np.dot(np.linalg.inv(T), A)
    return im.load().affine_transform(A, border=border).mat2gray(0,255)</code></pre>
</details>
</dd>
<dt id="vipy.noise.salt_and_pepper"><code class="name flex">
<span>def <span class="ident">salt_and_pepper</span></span>(<span>im, p)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L158-L164" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def salt_and_pepper(im, p):
    assert isinstance(im, vipy.image.Image)    
    assert p &gt;= 0 and p &lt;= 1
    
    W = np.array(np.random.rand( im.height(), im.width(), 1 ) &gt; p).astype(np.float32)
    B = np.array(np.random.rand( im.height(), im.width(), 1 ) &gt; p).astype(np.float32)    
    return im.load().float().mat2gray().map(lambda x: np.multiply(x, W) + 1-W).map(lambda x: np.multiply(x, B)).colorspace_like(im)</code></pre>
</details>
</dd>
<dt id="vipy.noise.saturate"><code class="name flex">
<span>def <span class="ident">saturate</span></span>(<span>im, low, high)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L203-L205" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def saturate(im, low, high):
    assert isinstance(im, vipy.image.Image)    
    return im.saturate(low, high)</code></pre>
</details>
</dd>
<dt id="vipy.noise.scan_lines"><code class="name flex">
<span>def <span class="ident">scan_lines</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L236-L240" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def scan_lines(im):
    assert isinstance(im, vipy.image.Image)
    imc = im.load()
    imc._array[::2, :] = 0
    return imc</code></pre>
</details>
</dd>
<dt id="vipy.noise.sharpness"><code class="name flex">
<span>def <span class="ident">sharpness</span></span>(<span>im, f)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L211-L212" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def sharpness(im, f):
    return im.array(np.array(torchvision.transforms.v2.functional.adjust_sharpness(im.load().torch(&#39;CHW&#39;), f).permute(1,2,0)))</code></pre>
</details>
</dd>
<dt id="vipy.noise.solarize"><code class="name flex">
<span>def <span class="ident">solarize</span></span>(<span>im, t)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L179-L181" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def solarize(im, t):
    assert t&gt;=0 and t&lt;=255    
    return im.array(np.array(PIL.ImageOps.solarize(im.load().pil(), t)))</code></pre>
</details>
</dd>
<dt id="vipy.noise.translate"><code class="name flex">
<span>def <span class="ident">translate</span></span>(<span>im, dx, dy)</span>
</code></dt>
<dd>
<div class="desc"><p>Translate by (dx,dy) pixels, with zero border handling</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L132-L135" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def translate(im, dx, dy): 
    &#34;&#34;&#34;Translate by (dx,dy) pixels, with zero border handling&#34;&#34;&#34;
    assert isinstance(im, vipy.image.Image)
    return im.load().padcrop(im.imagebox().translate(dx,dy))</code></pre>
</details>
</dd>
<dt id="vipy.noise.vertical_mirror"><code class="name flex">
<span>def <span class="ident">vertical_mirror</span></span>(<span>im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L87-L92" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def vertical_mirror(im):
    assert isinstance(im, vipy.image.Image)            
    img = im.load().array()
    (i,j) = (im.height()//2 if vipy.math.iseven(im.height()) else (im.height()//2)+1, im.height()//2)
    img[i:,:] = np.flipud(img[0:j, :])
    return im.array(img)</code></pre>
</details>
</dd>
<dt id="vipy.noise.vertical_motion_blur"><code class="name flex">
<span>def <span class="ident">vertical_motion_blur</span></span>(<span>im, kernel_size)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L94-L99" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def vertical_motion_blur(im, kernel_size):
    assert isinstance(im, vipy.image.Image)
    kernel_v = np.zeros((kernel_size, kernel_size) )  
    kernel_v[:, int((kernel_size - 1)/2)] = np.ones(kernel_size)  
    kernel_v /= kernel_size
    return im.load().map(lambda img: cv2.filter2D(img, -1, kernel_v)).mat2gray(0,255).colorspace(&#39;float&#39;)</code></pre>
</details>
</dd>
<dt id="vipy.noise.zoom"><code class="name flex">
<span>def <span class="ident">zoom</span></span>(<span>im, s, zx=None, zy=None, border='zero')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L144-L149" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def zoom(im, s, zx=None, zy=None, border=&#39;zero&#39;):
    assert isinstance(im, vipy.image.Image)
    assert s &gt; 0

    (zx, zy) = ((-im.width()/2) if zx is None else -zx, (-im.height()/2) if zy is None else -zy)    
    return isotropic_scale(translate(im, zx, zy), s)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="vipy.noise.Geometric"><code class="flex name class">
<span>class <span class="ident">Geometric</span></span>
<span>(</span><span>magnitude=0.25, provenance=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L334-L339" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class Geometric(Noise):
    def __init__(self, magnitude=0.25, provenance=False):
        super().__init__(magnitude=magnitude, provenance=provenance,
                         register=[&#39;translate&#39;, &#39;horizontal_motion_blur&#39;, &#39;vertical_motion_blur&#39;, &#39;barrel&#39;,
                                   &#39;left_swirl&#39;, &#39;right_swirl&#39;,&#39;horizontal_mirror&#39;,&#39;left_shear&#39;,&#39;right_shear&#39;,
                                   &#39;rotate&#39;,&#39;isotropic_scale&#39;,&#39;fliplr&#39;,&#39;crop&#39;])</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="vipy.noise.Noise" href="#vipy.noise.Noise">Noise</a></li>
</ul>
</dd>
<dt id="vipy.noise.Noise"><code class="flex name class">
<span>class <span class="ident">Noise</span></span>
<span>(</span><span>magnitude=0.25, provenance=False, register=None, deregister=['hot', 'rainbow', 'vertical_mirror', 'flipud', 'rot90cw', 'rot90ccw'])</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L248-L327" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class Noise():
    def __init__(self, magnitude=0.25, provenance=False, register=None, deregister=[&#39;hot&#39;,&#39;rainbow&#39;,&#39;vertical_mirror&#39;,&#39;flipud&#39;,&#39;rot90cw&#39;,&#39;rot90ccw&#39;]):

        n = magnitude
        (shear, dx, dy, rot, z, border, sigma, gain) = (n*0.25, n*0.15, n*0.15, n*25, n*0.2, &#39;replicate&#39;, 1.0, 0.5)
        
        self._provenance = provenance        
        self._registry = {&#39;blur&#39;: lambda im: blur(im, sigma=n*random.uniform(im.mindim()*0.01, im.mindim()*0.05)),
                          &#39;salt_and_pepper&#39;: lambda im: salt_and_pepper(im, n*0.1*random.random()),
                          &#39;jpeg_compression&#39;: lambda im: jpeg_compression(im, random.randint(50,95-int(10*n))),
                          &#39;greyscale&#39;: lambda im: greyscale(im),
                          &#39;bgr&#39;: lambda im: bgr(im),
                          &#39;hot&#39;: lambda im: hot(im),
                          &#39;rainbow&#39;: lambda im: rainbow(im),
                          &#39;saturate&#39;: lambda im: saturate(im, random.randint(0, 64), random.randint(255-64, 255)),
                          &#39;edge&#39;: lambda im: edge(im),
                          &#39;emboss&#39;: lambda im: emboss(im),
                          &#39;darken&#39;: lambda im: darken(im, 1-n*random.random()),
                          &#39;negative&#39;: lambda im: negative(im),
                          &#39;scan_lines&#39;: lambda im: scan_lines(im),
                          &#39;additive_gaussian_noise&#39;: lambda im: additive_gaussian_noise(im, np.random.uniform(n*0.01, n*0.5)),
                          &#39;translate&#39;: lambda im, dx=dx, dy=dy, b=border: translate(im, np.random.uniform(-dx,dx), np.random.uniform(-dy,dy)),                          
                          &#39;horizontal_motion_blur&#39;: lambda im: horizontal_motion_blur(im, random.randint(math.ceil(im.mindim()*0.05*n), math.ceil(im.mindim()*0.15*n))),
                          &#39;vertical_motion_blur&#39;: lambda im: vertical_motion_blur(im, random.randint(math.ceil(im.mindim()*0.05*n), math.ceil(im.mindim()*0.15*n))),                          
                          &#39;barrel&#39;: lambda im: barrel(im),
                          &#39;left_swirl&#39;: lambda im: left_swirl(im, center=(random.randint(0, im.mindim()), random.randint(0,im.mindim())), strength=n),
                          &#39;right_swirl&#39;: lambda im: right_swirl(im, center=(random.randint(0, im.mindim()), random.randint(0, im.mindim())), strength=n),
                          &#39;horizontal_mirror&#39;: lambda im: horizontal_mirror(im),
                          &#39;vertical_mirror&#39;: lambda im: vertical_mirror(im),
                          &#39;left_shear&#39;: lambda im, s=shear, b=border: left_shear(im, np.random.uniform(0,s), border=b),
                          &#39;right_shear&#39;: lambda im, s=shear, b=border: right_shear(im, np.random.uniform(0,s), border=b),
                          &#39;rotate&#39;: lambda im, deg=rot, b=border: rotate(im, deg=np.random.uniform(-deg,deg), border=b),
                          &#39;isotropic_scale&#39;: lambda im, z=z, b=border: isotropic_scale(im, np.random.uniform(1.0-z, 1.0+z)),
                          &#39;ghost&#39;: lambda im: ghost(im,
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n)),
                                                    random.randint(-int(im.mindim()*0.05*n),int(im.mindim()*0.05*n))),
                          &#39;bit_depth&#39;: lambda im: bit_depth(im, random.randint(1,7)),
                          &#39;permute_color_channels&#39;: lambda im: permute_color_channels(im, random.sample([[0,2,1],[1,0,2],[1,2,0],[2,0,1],[2,1,0]], 1)[0]),
                          &#39;fliplr&#39;: lambda im: fliplr(im),
                          &#39;flipud&#39;: lambda im: flipud(im),
                          &#39;rot90cw&#39;: lambda im: rot90cw(im),
                          &#39;rot90ccw&#39;: lambda im: rot90ccw(im),
                          &#39;solarize&#39;: lambda im: solarize(im, random.randint(32, 255-32)),
                          &#39;colorjitter&#39;: lambda im: colorjitter(im),
                          &#39;autocontrast&#39;: lambda im: autocontrast(im),
                          &#39;sharpness&#39;: lambda im: sharpness(im, 10*random.random()),
                          &#39;gamma&#39;: lambda im: gamma(im, random.random()+0.5),
                          &#39;crop&#39;: lambda im: crop(im, 1-0.2*random.random()),
                          }

        if deregister is not None:
            self._registry = {k:v for (k,v) in self._registry.items() if k not in deregister}                    
        if register is not None:
            self._registry = {k:v for (k,v) in self._registry.items() if k in register}        

    def transformations(self):
        return list(self._registry.keys())

    def random_transformation(self, im):
        return self.transform(im, vipy.util.takeone(self.transformations()))
        
    def transform(self, im, transform):
        assert isinstance(im, vipy.image.Image)
        assert transform in self.transformations()

        imd = self._registry[transform](im.clone().load())
        if self._provenance:
            imd.setattribute(&#39;vipy.noise&#39;, transform)
        return imd

    def montage(self, im):
        return vipy.visualize.montage([self.transform(im.clone().centersquare(), k) for k in self.transformations()], 256, 256)
    
    def __call__(self, im):
        assert isinstance(im, vipy.image.Image) or all(isinstance(x, vipy.image.Image) for x in im), &#34;singletons or batches required&#34;
        return self.random_transformation(im) if isinstance(im, vipy.image.Image) else tuple([self.random_transformation(x) for x in im])</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="vipy.noise.Geometric" href="#vipy.noise.Geometric">Geometric</a></li>
<li><a title="vipy.noise.Perturbation" href="#vipy.noise.Perturbation">Perturbation</a></li>
<li><a title="vipy.noise.Photometric" href="#vipy.noise.Photometric">Photometric</a></li>
<li><a title="vipy.noise.RandomCrop" href="#vipy.noise.RandomCrop">RandomCrop</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="vipy.noise.Noise.montage"><code class="name flex">
<span>def <span class="ident">montage</span></span>(<span>self, im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L322-L323" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def montage(self, im):
    return vipy.visualize.montage([self.transform(im.clone().centersquare(), k) for k in self.transformations()], 256, 256)</code></pre>
</details>
</dd>
<dt id="vipy.noise.Noise.random_transformation"><code class="name flex">
<span>def <span class="ident">random_transformation</span></span>(<span>self, im)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L310-L311" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def random_transformation(self, im):
    return self.transform(im, vipy.util.takeone(self.transformations()))</code></pre>
</details>
</dd>
<dt id="vipy.noise.Noise.transform"><code class="name flex">
<span>def <span class="ident">transform</span></span>(<span>self, im, transform)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L313-L320" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def transform(self, im, transform):
    assert isinstance(im, vipy.image.Image)
    assert transform in self.transformations()

    imd = self._registry[transform](im.clone().load())
    if self._provenance:
        imd.setattribute(&#39;vipy.noise&#39;, transform)
    return imd</code></pre>
</details>
</dd>
<dt id="vipy.noise.Noise.transformations"><code class="name flex">
<span>def <span class="ident">transformations</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L307-L308" class="git-link">Browse git</a>
</summary>
<pre><code class="python">def transformations(self):
    return list(self._registry.keys())</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="vipy.noise.Perturbation"><code class="flex name class">
<span>class <span class="ident">Perturbation</span></span>
<span>(</span><span>magnitude=0.5, provenance=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L346-L348" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class Perturbation(Noise):
    def __init__(self, magnitude=0.5, provenance=False):
        super().__init__(magnitude=magnitude, provenance=provenance, register=[&#39;translate&#39;, &#39;isotropic_scale&#39;, &#39;crop&#39;, &#39;blur&#39;, &#39;additive_gaussian_noise&#39;]) </code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="vipy.noise.Noise" href="#vipy.noise.Noise">Noise</a></li>
</ul>
</dd>
<dt id="vipy.noise.Photometric"><code class="flex name class">
<span>class <span class="ident">Photometric</span></span>
<span>(</span><span>magnitude=0.25, provenance=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L340-L345" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class Photometric(Noise):
    def __init__(self, magnitude=0.25, provenance=False):
        super().__init__(magnitude=magnitude, provenance=provenance,
                         register=[&#39;blur&#39;, &#39;salt_and_pepper&#39;, &#39;jpeg_compression&#39;, &#39;greyscale&#39;, &#39;bgr&#39;, &#39;hot&#39;,&#39;saturate&#39;,&#39;edge&#39;,&#39;emboss&#39;,
                                   &#39;darken&#39;,&#39;negative&#39;,&#39;scan_lines&#39;,&#39;additive_gaussian_noise&#39;,&#39;bit_depth&#39;,&#39;permute_color_channels&#39;,&#39;solarize&#39;,
                                   &#39;colorjitter&#39;,&#39;autocontrast&#39;, &#39;sharpness&#39;, &#39;gamma&#39;, &#39;ghost&#39;])</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="vipy.noise.Noise" href="#vipy.noise.Noise">Noise</a></li>
</ul>
</dd>
<dt id="vipy.noise.RandomCrop"><code class="flex name class">
<span>class <span class="ident">RandomCrop</span></span>
<span>(</span><span>magnitude=1, provenance=False)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/aeafa05f49d28db0926b8db763349138abc3f87a/vipy/noise.py#L330-L332" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class RandomCrop(Noise):
    def __init__(self, magnitude=1, provenance=False):
        super().__init__(magnitude=magnitude, provenance=provenance, register=[&#39;translate&#39;, &#39;isotropic_scale&#39;, &#39;crop&#39;])</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="vipy.noise.Noise" href="#vipy.noise.Noise">Noise</a></li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="VIPY" href="https://github.com/visym/vipy/">
<img src="https://www.visym.com/labs/images/visym_logo_black_notext.png" alt="" width="60">
</a>
<h1 style="font-size:200%;"><b>VIPY:</b> Visual Dataset Transformation</h1>
</header>
<form>
<input id="lunr-search" name="q" placeholder="🔎 Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = './doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="vipy" href="index.html">vipy</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="vipy.noise.additive_gaussian_noise" href="#vipy.noise.additive_gaussian_noise">additive_gaussian_noise</a></code></li>
<li><code><a title="vipy.noise.autocontrast" href="#vipy.noise.autocontrast">autocontrast</a></code></li>
<li><code><a title="vipy.noise.barrel" href="#vipy.noise.barrel">barrel</a></code></li>
<li><code><a title="vipy.noise.bgr" href="#vipy.noise.bgr">bgr</a></code></li>
<li><code><a title="vipy.noise.bit_depth" href="#vipy.noise.bit_depth">bit_depth</a></code></li>
<li><code><a title="vipy.noise.blur" href="#vipy.noise.blur">blur</a></code></li>
<li><code><a title="vipy.noise.colorjitter" href="#vipy.noise.colorjitter">colorjitter</a></code></li>
<li><code><a title="vipy.noise.crop" href="#vipy.noise.crop">crop</a></code></li>
<li><code><a title="vipy.noise.darken" href="#vipy.noise.darken">darken</a></code></li>
<li><code><a title="vipy.noise.edge" href="#vipy.noise.edge">edge</a></code></li>
<li><code><a title="vipy.noise.emboss" href="#vipy.noise.emboss">emboss</a></code></li>
<li><code><a title="vipy.noise.fliplr" href="#vipy.noise.fliplr">fliplr</a></code></li>
<li><code><a title="vipy.noise.flipud" href="#vipy.noise.flipud">flipud</a></code></li>
<li><code><a title="vipy.noise.gamma" href="#vipy.noise.gamma">gamma</a></code></li>
<li><code><a title="vipy.noise.ghost" href="#vipy.noise.ghost">ghost</a></code></li>
<li><code><a title="vipy.noise.greyscale" href="#vipy.noise.greyscale">greyscale</a></code></li>
<li><code><a title="vipy.noise.horizontal_mirror" href="#vipy.noise.horizontal_mirror">horizontal_mirror</a></code></li>
<li><code><a title="vipy.noise.horizontal_motion_blur" href="#vipy.noise.horizontal_motion_blur">horizontal_motion_blur</a></code></li>
<li><code><a title="vipy.noise.hot" href="#vipy.noise.hot">hot</a></code></li>
<li><code><a title="vipy.noise.isotropic_scale" href="#vipy.noise.isotropic_scale">isotropic_scale</a></code></li>
<li><code><a title="vipy.noise.jpeg_compression" href="#vipy.noise.jpeg_compression">jpeg_compression</a></code></li>
<li><code><a title="vipy.noise.left_shear" href="#vipy.noise.left_shear">left_shear</a></code></li>
<li><code><a title="vipy.noise.left_swirl" href="#vipy.noise.left_swirl">left_swirl</a></code></li>
<li><code><a title="vipy.noise.negative" href="#vipy.noise.negative">negative</a></code></li>
<li><code><a title="vipy.noise.permute_color_channels" href="#vipy.noise.permute_color_channels">permute_color_channels</a></code></li>
<li><code><a title="vipy.noise.rainbow" href="#vipy.noise.rainbow">rainbow</a></code></li>
<li><code><a title="vipy.noise.right_shear" href="#vipy.noise.right_shear">right_shear</a></code></li>
<li><code><a title="vipy.noise.right_swirl" href="#vipy.noise.right_swirl">right_swirl</a></code></li>
<li><code><a title="vipy.noise.rot90ccw" href="#vipy.noise.rot90ccw">rot90ccw</a></code></li>
<li><code><a title="vipy.noise.rot90cw" href="#vipy.noise.rot90cw">rot90cw</a></code></li>
<li><code><a title="vipy.noise.rotate" href="#vipy.noise.rotate">rotate</a></code></li>
<li><code><a title="vipy.noise.salt_and_pepper" href="#vipy.noise.salt_and_pepper">salt_and_pepper</a></code></li>
<li><code><a title="vipy.noise.saturate" href="#vipy.noise.saturate">saturate</a></code></li>
<li><code><a title="vipy.noise.scan_lines" href="#vipy.noise.scan_lines">scan_lines</a></code></li>
<li><code><a title="vipy.noise.sharpness" href="#vipy.noise.sharpness">sharpness</a></code></li>
<li><code><a title="vipy.noise.solarize" href="#vipy.noise.solarize">solarize</a></code></li>
<li><code><a title="vipy.noise.translate" href="#vipy.noise.translate">translate</a></code></li>
<li><code><a title="vipy.noise.vertical_mirror" href="#vipy.noise.vertical_mirror">vertical_mirror</a></code></li>
<li><code><a title="vipy.noise.vertical_motion_blur" href="#vipy.noise.vertical_motion_blur">vertical_motion_blur</a></code></li>
<li><code><a title="vipy.noise.zoom" href="#vipy.noise.zoom">zoom</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="vipy.noise.Geometric" href="#vipy.noise.Geometric">Geometric</a></code></h4>
</li>
<li>
<h4><code><a title="vipy.noise.Noise" href="#vipy.noise.Noise">Noise</a></code></h4>
<ul class="">
<li><code><a title="vipy.noise.Noise.montage" href="#vipy.noise.Noise.montage">montage</a></code></li>
<li><code><a title="vipy.noise.Noise.random_transformation" href="#vipy.noise.Noise.random_transformation">random_transformation</a></code></li>
<li><code><a title="vipy.noise.Noise.transform" href="#vipy.noise.Noise.transform">transform</a></code></li>
<li><code><a title="vipy.noise.Noise.transformations" href="#vipy.noise.Noise.transformations">transformations</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="vipy.noise.Perturbation" href="#vipy.noise.Perturbation">Perturbation</a></code></h4>
</li>
<li>
<h4><code><a title="vipy.noise.Photometric" href="#vipy.noise.Photometric">Photometric</a></code></h4>
</li>
<li>
<h4><code><a title="vipy.noise.RandomCrop" href="#vipy.noise.RandomCrop">RandomCrop</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
