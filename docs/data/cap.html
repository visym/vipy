<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.11.6" />
<meta name="google-site-verification" content="aB8LkQegj94_TJPdrcJm2ldIRWyXY82Jp24Gtkdgyn0" />
<title>vipy.data.cap API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>vipy.data.cap</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/f10b3f6aec0ef011e86ee11667579388379a8ac3/vipy/data/cap.py#L1-L37" class="git-link">Browse git</a>
</summary>
<pre><code class="python">import os
import vipy


class CAP_classification_clip(vipy.dataset.Dataset):
    URL = &#39;https://consented-activities-of-people.s3.us-west-2.amazonaws.com/train/cap_classification_clip.tar.gz&#39;
    MD5 = &#39;54315e2ce204f0dbbe298490a63b5b3b&#39;
    def __init__(self, datadir):
        if not os.path.exists(os.path.join(datadir, &#39;cap_classification_clip&#39;, &#39;README.md&#39;)):
            vipy.downloader.download_and_unpack(CAP_classification_clip.URL, datadir)

        annotations = os.path.join(datadir, &#39;cap_classification_clip&#39;, &#39;annotations&#39;)
        super().__init__(vipy.dataset.Dataset.from_directory(annotations, filetype=&#39;json&#39;), id=&#39;cap&#39;)


class CAP_classification_pad(vipy.dataset.Dataset):
    URL = &#39;https://consented-activities-of-people.s3.us-west-2.amazonaws.com/train/cap_classification_pad.tar.gz&#39;
    MD5 = &#39;fbdc75e6ef10b874ddda20ee9765a710&#39;
    def __init__(self, datadir):
        if not os.path.exists(os.path.join(datadir, &#39;cap_classification_pad&#39;, &#39;README.md&#39;)):
            vipy.downloader.download_and_unpack(CAP_classification_pad.URL, datadir)

        annotations = os.path.join(datadir, &#39;cap_classification_pad&#39;, &#39;annotations&#39;)
        super().__init__(vipy.dataset.Dataset.from_directory(annotations, filetype=&#39;json&#39;), id=&#39;cap&#39;)

        
class CAP_detection(vipy.dataset.Dataset):
    URL = &#39;https://dl.dropboxusercontent.com/s/db11zv0gcycu384/cap_detection_handheld_val.tar.gz.72f58e69582c17dd366d3c7e85cf0da8&#39;
    MD5 = &#39;72f58e69582c17dd366d3c7e85cf0da8&#39;
    def __init__(self, datadir):
        if not os.path.exists(os.path.join(datadir, &#39;cap_detection_handheld_val&#39;, &#39;README.md&#39;)):
            vipy.downloader.download(CAP_detection.URL, os.path.join(datadir, &#39;cap_detection_handheld_val.tar.gz&#39;), md5=CAP_detection.MD5)
            vipy.downloader.unpack(os.path.join(datadir, &#39;cap_detection_handheld_val.tar.gz&#39;), datadir)

        annotations = os.path.join(datadir, &#39;cap_detection_handheld_val&#39;, &#39;annotations&#39;)
        super().__init__(vipy.dataset.Dataset.from_directory(annotations, filetype=&#39;json&#39;), id=&#39;cap_detection:val&#39;)
    </code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="vipy.data.cap.CAP_classification_clip"><code class="flex name class">
<span>class <span class="ident">CAP_classification_clip</span></span>
<span>(</span><span>datadir)</span>
</code></dt>
<dd>
<div class="desc"><p>vipy.dataset.Dataset() class</p>
<p>Common class to manipulate large sets of objects in parallel</p>
<h2 id="args">Args</h2>
<ul>
<li>dataset [list, tuple, set, obj]: a python built-in type that supports indexing or a generic object that supports indexing and has a length</li>
<li>id [str]: an optional id of this dataset, which provides a descriptive name of the dataset</li>
<li>loader [callable]: a callable loader that will construct the object from a raw data element in dataset.
This is useful for custom deerialization or on demand transformations
Datasets can be indexed, shuffled, iterated, minibatched, sorted, sampled, partitioned.
Datasets constructed of vipy objects are lazy loaded, delaying loading pixels until they are needed</li>
</ul>
<pre><code class="language-python">(trainset, valset, testset) = vipy.dataset.registry('mnist')

(trainset, valset) = trainset.partition(0.9, 0.1)
categories = trainset.set(lambda im: im.category())
smaller = testset.take(1024)
preprocessed = smaller.map(lambda im: im.resize(32, 32).gain(1/256))

for b in preprocessed.minibatch(128):
    print(b)

# visualize the dataset 
(trainset, valset, testset) = vipy.dataset.registry('pascal_voc_2007')
for im in trainset:
    im.mindim(1024).show().print(sleep=1).close()

</code></pre>
<p>Datasets can be constructed from directories of json files or image files (<code><a title="vipy.dataset.Dataset.from_directory" href="../dataset.html#vipy.dataset.Dataset.from_directory">Dataset.from_directory()</a></code>)
Datasets can be constructed from a single json file containing a list of objects (<code><a title="vipy.dataset.Dataset.from_json" href="../dataset.html#vipy.dataset.Dataset.from_json">Dataset.from_json()</a></code>)</p>
<div class="admonition note">
<p class="admonition-title">Note:&ensp;that if a lambda function is provided as loader then this dataset is not serializable.
Use self.load() then serialize</p>
</div></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/f10b3f6aec0ef011e86ee11667579388379a8ac3/vipy/data/cap.py#L5-L13" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class CAP_classification_clip(vipy.dataset.Dataset):
    URL = &#39;https://consented-activities-of-people.s3.us-west-2.amazonaws.com/train/cap_classification_clip.tar.gz&#39;
    MD5 = &#39;54315e2ce204f0dbbe298490a63b5b3b&#39;
    def __init__(self, datadir):
        if not os.path.exists(os.path.join(datadir, &#39;cap_classification_clip&#39;, &#39;README.md&#39;)):
            vipy.downloader.download_and_unpack(CAP_classification_clip.URL, datadir)

        annotations = os.path.join(datadir, &#39;cap_classification_clip&#39;, &#39;annotations&#39;)
        super().__init__(vipy.dataset.Dataset.from_directory(annotations, filetype=&#39;json&#39;), id=&#39;cap&#39;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="vipy.dataset.Dataset" href="../dataset.html#vipy.dataset.Dataset">Dataset</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="vipy.data.cap.CAP_classification_clip.MD5"><code class="name">var <span class="ident">MD5</span></code></dt>
<dd>
<div class="desc"><p>The type of the None singleton.</p></div>
</dd>
<dt id="vipy.data.cap.CAP_classification_clip.URL"><code class="name">var <span class="ident">URL</span></code></dt>
<dd>
<div class="desc"><p>The type of the None singleton.</p></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="vipy.dataset.Dataset" href="../dataset.html#vipy.dataset.Dataset">Dataset</a></b></code>:
<ul class="hlist">
<li><code><a title="vipy.dataset.Dataset.batch" href="../dataset.html#vipy.dataset.Dataset.batch">batch</a></code></li>
<li><code><a title="vipy.dataset.Dataset.chunk" href="../dataset.html#vipy.dataset.Dataset.chunk">chunk</a></code></li>
<li><code><a title="vipy.dataset.Dataset.chunks" href="../dataset.html#vipy.dataset.Dataset.chunks">chunks</a></code></li>
<li><code><a title="vipy.dataset.Dataset.clone" href="../dataset.html#vipy.dataset.Dataset.clone">clone</a></code></li>
<li><code><a title="vipy.dataset.Dataset.count" href="../dataset.html#vipy.dataset.Dataset.count">count</a></code></li>
<li><code><a title="vipy.dataset.Dataset.filter" href="../dataset.html#vipy.dataset.Dataset.filter">filter</a></code></li>
<li><code><a title="vipy.dataset.Dataset.frequency" href="../dataset.html#vipy.dataset.Dataset.frequency">frequency</a></code></li>
<li><code><a title="vipy.dataset.Dataset.from_directory" href="../dataset.html#vipy.dataset.Dataset.from_directory">from_directory</a></code></li>
<li><code><a title="vipy.dataset.Dataset.from_image_urls" href="../dataset.html#vipy.dataset.Dataset.from_image_urls">from_image_urls</a></code></li>
<li><code><a title="vipy.dataset.Dataset.groupby" href="../dataset.html#vipy.dataset.Dataset.groupby">groupby</a></code></li>
<li><code><a title="vipy.dataset.Dataset.id" href="../dataset.html#vipy.dataset.Dataset.id">id</a></code></li>
<li><code><a title="vipy.dataset.Dataset.identity_shuffler" href="../dataset.html#vipy.dataset.Dataset.identity_shuffler">identity_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.index" href="../dataset.html#vipy.dataset.Dataset.index">index</a></code></li>
<li><code><a title="vipy.dataset.Dataset.inverse_frequency" href="../dataset.html#vipy.dataset.Dataset.inverse_frequency">inverse_frequency</a></code></li>
<li><code><a title="vipy.dataset.Dataset.list" href="../dataset.html#vipy.dataset.Dataset.list">list</a></code></li>
<li><code><a title="vipy.dataset.Dataset.load" href="../dataset.html#vipy.dataset.Dataset.load">load</a></code></li>
<li><code><a title="vipy.dataset.Dataset.localmap" href="../dataset.html#vipy.dataset.Dataset.localmap">localmap</a></code></li>
<li><code><a title="vipy.dataset.Dataset.map" href="../dataset.html#vipy.dataset.Dataset.map">map</a></code></li>
<li><code><a title="vipy.dataset.Dataset.minibatch" href="../dataset.html#vipy.dataset.Dataset.minibatch">minibatch</a></code></li>
<li><code><a title="vipy.dataset.Dataset.partition" href="../dataset.html#vipy.dataset.Dataset.partition">partition</a></code></li>
<li><code><a title="vipy.dataset.Dataset.pipeline" href="../dataset.html#vipy.dataset.Dataset.pipeline">pipeline</a></code></li>
<li><code><a title="vipy.dataset.Dataset.raw" href="../dataset.html#vipy.dataset.Dataset.raw">raw</a></code></li>
<li><code><a title="vipy.dataset.Dataset.repeat" href="../dataset.html#vipy.dataset.Dataset.repeat">repeat</a></code></li>
<li><code><a title="vipy.dataset.Dataset.sample" href="../dataset.html#vipy.dataset.Dataset.sample">sample</a></code></li>
<li><code><a title="vipy.dataset.Dataset.set" href="../dataset.html#vipy.dataset.Dataset.set">set</a></code></li>
<li><code><a title="vipy.dataset.Dataset.shift" href="../dataset.html#vipy.dataset.Dataset.shift">shift</a></code></li>
<li><code><a title="vipy.dataset.Dataset.shuffle" href="../dataset.html#vipy.dataset.Dataset.shuffle">shuffle</a></code></li>
<li><code><a title="vipy.dataset.Dataset.slice" href="../dataset.html#vipy.dataset.Dataset.slice">slice</a></code></li>
<li><code><a title="vipy.dataset.Dataset.sort" href="../dataset.html#vipy.dataset.Dataset.sort">sort</a></code></li>
<li><code><a title="vipy.dataset.Dataset.split" href="../dataset.html#vipy.dataset.Dataset.split">split</a></code></li>
<li><code><a title="vipy.dataset.Dataset.streaming_map" href="../dataset.html#vipy.dataset.Dataset.streaming_map">streaming_map</a></code></li>
<li><code><a title="vipy.dataset.Dataset.streaming_shuffler" href="../dataset.html#vipy.dataset.Dataset.streaming_shuffler">streaming_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.take" href="../dataset.html#vipy.dataset.Dataset.take">take</a></code></li>
<li><code><a title="vipy.dataset.Dataset.take_fraction" href="../dataset.html#vipy.dataset.Dataset.take_fraction">take_fraction</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takeby" href="../dataset.html#vipy.dataset.Dataset.takeby">takeby</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takelist" href="../dataset.html#vipy.dataset.Dataset.takelist">takelist</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takeone" href="../dataset.html#vipy.dataset.Dataset.takeone">takeone</a></code></li>
<li><code><a title="vipy.dataset.Dataset.truncate" href="../dataset.html#vipy.dataset.Dataset.truncate">truncate</a></code></li>
<li><code><a title="vipy.dataset.Dataset.tuple" href="../dataset.html#vipy.dataset.Dataset.tuple">tuple</a></code></li>
<li><code><a title="vipy.dataset.Dataset.uniform_shuffler" href="../dataset.html#vipy.dataset.Dataset.uniform_shuffler">uniform_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.zip" href="../dataset.html#vipy.dataset.Dataset.zip">zip</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="vipy.data.cap.CAP_classification_pad"><code class="flex name class">
<span>class <span class="ident">CAP_classification_pad</span></span>
<span>(</span><span>datadir)</span>
</code></dt>
<dd>
<div class="desc"><p>vipy.dataset.Dataset() class</p>
<p>Common class to manipulate large sets of objects in parallel</p>
<h2 id="args">Args</h2>
<ul>
<li>dataset [list, tuple, set, obj]: a python built-in type that supports indexing or a generic object that supports indexing and has a length</li>
<li>id [str]: an optional id of this dataset, which provides a descriptive name of the dataset</li>
<li>loader [callable]: a callable loader that will construct the object from a raw data element in dataset.
This is useful for custom deerialization or on demand transformations
Datasets can be indexed, shuffled, iterated, minibatched, sorted, sampled, partitioned.
Datasets constructed of vipy objects are lazy loaded, delaying loading pixels until they are needed</li>
</ul>
<pre><code class="language-python">(trainset, valset, testset) = vipy.dataset.registry('mnist')

(trainset, valset) = trainset.partition(0.9, 0.1)
categories = trainset.set(lambda im: im.category())
smaller = testset.take(1024)
preprocessed = smaller.map(lambda im: im.resize(32, 32).gain(1/256))

for b in preprocessed.minibatch(128):
    print(b)

# visualize the dataset 
(trainset, valset, testset) = vipy.dataset.registry('pascal_voc_2007')
for im in trainset:
    im.mindim(1024).show().print(sleep=1).close()

</code></pre>
<p>Datasets can be constructed from directories of json files or image files (<code><a title="vipy.dataset.Dataset.from_directory" href="../dataset.html#vipy.dataset.Dataset.from_directory">Dataset.from_directory()</a></code>)
Datasets can be constructed from a single json file containing a list of objects (<code><a title="vipy.dataset.Dataset.from_json" href="../dataset.html#vipy.dataset.Dataset.from_json">Dataset.from_json()</a></code>)</p>
<div class="admonition note">
<p class="admonition-title">Note:&ensp;that if a lambda function is provided as loader then this dataset is not serializable.
Use self.load() then serialize</p>
</div></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/f10b3f6aec0ef011e86ee11667579388379a8ac3/vipy/data/cap.py#L16-L24" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class CAP_classification_pad(vipy.dataset.Dataset):
    URL = &#39;https://consented-activities-of-people.s3.us-west-2.amazonaws.com/train/cap_classification_pad.tar.gz&#39;
    MD5 = &#39;fbdc75e6ef10b874ddda20ee9765a710&#39;
    def __init__(self, datadir):
        if not os.path.exists(os.path.join(datadir, &#39;cap_classification_pad&#39;, &#39;README.md&#39;)):
            vipy.downloader.download_and_unpack(CAP_classification_pad.URL, datadir)

        annotations = os.path.join(datadir, &#39;cap_classification_pad&#39;, &#39;annotations&#39;)
        super().__init__(vipy.dataset.Dataset.from_directory(annotations, filetype=&#39;json&#39;), id=&#39;cap&#39;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="vipy.dataset.Dataset" href="../dataset.html#vipy.dataset.Dataset">Dataset</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="vipy.data.cap.CAP_classification_pad.MD5"><code class="name">var <span class="ident">MD5</span></code></dt>
<dd>
<div class="desc"><p>The type of the None singleton.</p></div>
</dd>
<dt id="vipy.data.cap.CAP_classification_pad.URL"><code class="name">var <span class="ident">URL</span></code></dt>
<dd>
<div class="desc"><p>The type of the None singleton.</p></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="vipy.dataset.Dataset" href="../dataset.html#vipy.dataset.Dataset">Dataset</a></b></code>:
<ul class="hlist">
<li><code><a title="vipy.dataset.Dataset.batch" href="../dataset.html#vipy.dataset.Dataset.batch">batch</a></code></li>
<li><code><a title="vipy.dataset.Dataset.chunk" href="../dataset.html#vipy.dataset.Dataset.chunk">chunk</a></code></li>
<li><code><a title="vipy.dataset.Dataset.chunks" href="../dataset.html#vipy.dataset.Dataset.chunks">chunks</a></code></li>
<li><code><a title="vipy.dataset.Dataset.clone" href="../dataset.html#vipy.dataset.Dataset.clone">clone</a></code></li>
<li><code><a title="vipy.dataset.Dataset.count" href="../dataset.html#vipy.dataset.Dataset.count">count</a></code></li>
<li><code><a title="vipy.dataset.Dataset.filter" href="../dataset.html#vipy.dataset.Dataset.filter">filter</a></code></li>
<li><code><a title="vipy.dataset.Dataset.frequency" href="../dataset.html#vipy.dataset.Dataset.frequency">frequency</a></code></li>
<li><code><a title="vipy.dataset.Dataset.from_directory" href="../dataset.html#vipy.dataset.Dataset.from_directory">from_directory</a></code></li>
<li><code><a title="vipy.dataset.Dataset.from_image_urls" href="../dataset.html#vipy.dataset.Dataset.from_image_urls">from_image_urls</a></code></li>
<li><code><a title="vipy.dataset.Dataset.groupby" href="../dataset.html#vipy.dataset.Dataset.groupby">groupby</a></code></li>
<li><code><a title="vipy.dataset.Dataset.id" href="../dataset.html#vipy.dataset.Dataset.id">id</a></code></li>
<li><code><a title="vipy.dataset.Dataset.identity_shuffler" href="../dataset.html#vipy.dataset.Dataset.identity_shuffler">identity_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.index" href="../dataset.html#vipy.dataset.Dataset.index">index</a></code></li>
<li><code><a title="vipy.dataset.Dataset.inverse_frequency" href="../dataset.html#vipy.dataset.Dataset.inverse_frequency">inverse_frequency</a></code></li>
<li><code><a title="vipy.dataset.Dataset.list" href="../dataset.html#vipy.dataset.Dataset.list">list</a></code></li>
<li><code><a title="vipy.dataset.Dataset.load" href="../dataset.html#vipy.dataset.Dataset.load">load</a></code></li>
<li><code><a title="vipy.dataset.Dataset.localmap" href="../dataset.html#vipy.dataset.Dataset.localmap">localmap</a></code></li>
<li><code><a title="vipy.dataset.Dataset.map" href="../dataset.html#vipy.dataset.Dataset.map">map</a></code></li>
<li><code><a title="vipy.dataset.Dataset.minibatch" href="../dataset.html#vipy.dataset.Dataset.minibatch">minibatch</a></code></li>
<li><code><a title="vipy.dataset.Dataset.partition" href="../dataset.html#vipy.dataset.Dataset.partition">partition</a></code></li>
<li><code><a title="vipy.dataset.Dataset.pipeline" href="../dataset.html#vipy.dataset.Dataset.pipeline">pipeline</a></code></li>
<li><code><a title="vipy.dataset.Dataset.raw" href="../dataset.html#vipy.dataset.Dataset.raw">raw</a></code></li>
<li><code><a title="vipy.dataset.Dataset.repeat" href="../dataset.html#vipy.dataset.Dataset.repeat">repeat</a></code></li>
<li><code><a title="vipy.dataset.Dataset.sample" href="../dataset.html#vipy.dataset.Dataset.sample">sample</a></code></li>
<li><code><a title="vipy.dataset.Dataset.set" href="../dataset.html#vipy.dataset.Dataset.set">set</a></code></li>
<li><code><a title="vipy.dataset.Dataset.shift" href="../dataset.html#vipy.dataset.Dataset.shift">shift</a></code></li>
<li><code><a title="vipy.dataset.Dataset.shuffle" href="../dataset.html#vipy.dataset.Dataset.shuffle">shuffle</a></code></li>
<li><code><a title="vipy.dataset.Dataset.slice" href="../dataset.html#vipy.dataset.Dataset.slice">slice</a></code></li>
<li><code><a title="vipy.dataset.Dataset.sort" href="../dataset.html#vipy.dataset.Dataset.sort">sort</a></code></li>
<li><code><a title="vipy.dataset.Dataset.split" href="../dataset.html#vipy.dataset.Dataset.split">split</a></code></li>
<li><code><a title="vipy.dataset.Dataset.streaming_map" href="../dataset.html#vipy.dataset.Dataset.streaming_map">streaming_map</a></code></li>
<li><code><a title="vipy.dataset.Dataset.streaming_shuffler" href="../dataset.html#vipy.dataset.Dataset.streaming_shuffler">streaming_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.take" href="../dataset.html#vipy.dataset.Dataset.take">take</a></code></li>
<li><code><a title="vipy.dataset.Dataset.take_fraction" href="../dataset.html#vipy.dataset.Dataset.take_fraction">take_fraction</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takeby" href="../dataset.html#vipy.dataset.Dataset.takeby">takeby</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takelist" href="../dataset.html#vipy.dataset.Dataset.takelist">takelist</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takeone" href="../dataset.html#vipy.dataset.Dataset.takeone">takeone</a></code></li>
<li><code><a title="vipy.dataset.Dataset.truncate" href="../dataset.html#vipy.dataset.Dataset.truncate">truncate</a></code></li>
<li><code><a title="vipy.dataset.Dataset.tuple" href="../dataset.html#vipy.dataset.Dataset.tuple">tuple</a></code></li>
<li><code><a title="vipy.dataset.Dataset.uniform_shuffler" href="../dataset.html#vipy.dataset.Dataset.uniform_shuffler">uniform_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.zip" href="../dataset.html#vipy.dataset.Dataset.zip">zip</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="vipy.data.cap.CAP_detection"><code class="flex name class">
<span>class <span class="ident">CAP_detection</span></span>
<span>(</span><span>datadir)</span>
</code></dt>
<dd>
<div class="desc"><p>vipy.dataset.Dataset() class</p>
<p>Common class to manipulate large sets of objects in parallel</p>
<h2 id="args">Args</h2>
<ul>
<li>dataset [list, tuple, set, obj]: a python built-in type that supports indexing or a generic object that supports indexing and has a length</li>
<li>id [str]: an optional id of this dataset, which provides a descriptive name of the dataset</li>
<li>loader [callable]: a callable loader that will construct the object from a raw data element in dataset.
This is useful for custom deerialization or on demand transformations
Datasets can be indexed, shuffled, iterated, minibatched, sorted, sampled, partitioned.
Datasets constructed of vipy objects are lazy loaded, delaying loading pixels until they are needed</li>
</ul>
<pre><code class="language-python">(trainset, valset, testset) = vipy.dataset.registry('mnist')

(trainset, valset) = trainset.partition(0.9, 0.1)
categories = trainset.set(lambda im: im.category())
smaller = testset.take(1024)
preprocessed = smaller.map(lambda im: im.resize(32, 32).gain(1/256))

for b in preprocessed.minibatch(128):
    print(b)

# visualize the dataset 
(trainset, valset, testset) = vipy.dataset.registry('pascal_voc_2007')
for im in trainset:
    im.mindim(1024).show().print(sleep=1).close()

</code></pre>
<p>Datasets can be constructed from directories of json files or image files (<code><a title="vipy.dataset.Dataset.from_directory" href="../dataset.html#vipy.dataset.Dataset.from_directory">Dataset.from_directory()</a></code>)
Datasets can be constructed from a single json file containing a list of objects (<code><a title="vipy.dataset.Dataset.from_json" href="../dataset.html#vipy.dataset.Dataset.from_json">Dataset.from_json()</a></code>)</p>
<div class="admonition note">
<p class="admonition-title">Note:&ensp;that if a lambda function is provided as loader then this dataset is not serializable.
Use self.load() then serialize</p>
</div></div>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/visym/vipy/blob/f10b3f6aec0ef011e86ee11667579388379a8ac3/vipy/data/cap.py#L27-L36" class="git-link">Browse git</a>
</summary>
<pre><code class="python">class CAP_detection(vipy.dataset.Dataset):
    URL = &#39;https://dl.dropboxusercontent.com/s/db11zv0gcycu384/cap_detection_handheld_val.tar.gz.72f58e69582c17dd366d3c7e85cf0da8&#39;
    MD5 = &#39;72f58e69582c17dd366d3c7e85cf0da8&#39;
    def __init__(self, datadir):
        if not os.path.exists(os.path.join(datadir, &#39;cap_detection_handheld_val&#39;, &#39;README.md&#39;)):
            vipy.downloader.download(CAP_detection.URL, os.path.join(datadir, &#39;cap_detection_handheld_val.tar.gz&#39;), md5=CAP_detection.MD5)
            vipy.downloader.unpack(os.path.join(datadir, &#39;cap_detection_handheld_val.tar.gz&#39;), datadir)

        annotations = os.path.join(datadir, &#39;cap_detection_handheld_val&#39;, &#39;annotations&#39;)
        super().__init__(vipy.dataset.Dataset.from_directory(annotations, filetype=&#39;json&#39;), id=&#39;cap_detection:val&#39;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="vipy.dataset.Dataset" href="../dataset.html#vipy.dataset.Dataset">Dataset</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="vipy.data.cap.CAP_detection.MD5"><code class="name">var <span class="ident">MD5</span></code></dt>
<dd>
<div class="desc"><p>The type of the None singleton.</p></div>
</dd>
<dt id="vipy.data.cap.CAP_detection.URL"><code class="name">var <span class="ident">URL</span></code></dt>
<dd>
<div class="desc"><p>The type of the None singleton.</p></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="vipy.dataset.Dataset" href="../dataset.html#vipy.dataset.Dataset">Dataset</a></b></code>:
<ul class="hlist">
<li><code><a title="vipy.dataset.Dataset.batch" href="../dataset.html#vipy.dataset.Dataset.batch">batch</a></code></li>
<li><code><a title="vipy.dataset.Dataset.chunk" href="../dataset.html#vipy.dataset.Dataset.chunk">chunk</a></code></li>
<li><code><a title="vipy.dataset.Dataset.chunks" href="../dataset.html#vipy.dataset.Dataset.chunks">chunks</a></code></li>
<li><code><a title="vipy.dataset.Dataset.clone" href="../dataset.html#vipy.dataset.Dataset.clone">clone</a></code></li>
<li><code><a title="vipy.dataset.Dataset.count" href="../dataset.html#vipy.dataset.Dataset.count">count</a></code></li>
<li><code><a title="vipy.dataset.Dataset.filter" href="../dataset.html#vipy.dataset.Dataset.filter">filter</a></code></li>
<li><code><a title="vipy.dataset.Dataset.frequency" href="../dataset.html#vipy.dataset.Dataset.frequency">frequency</a></code></li>
<li><code><a title="vipy.dataset.Dataset.from_directory" href="../dataset.html#vipy.dataset.Dataset.from_directory">from_directory</a></code></li>
<li><code><a title="vipy.dataset.Dataset.from_image_urls" href="../dataset.html#vipy.dataset.Dataset.from_image_urls">from_image_urls</a></code></li>
<li><code><a title="vipy.dataset.Dataset.groupby" href="../dataset.html#vipy.dataset.Dataset.groupby">groupby</a></code></li>
<li><code><a title="vipy.dataset.Dataset.id" href="../dataset.html#vipy.dataset.Dataset.id">id</a></code></li>
<li><code><a title="vipy.dataset.Dataset.identity_shuffler" href="../dataset.html#vipy.dataset.Dataset.identity_shuffler">identity_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.index" href="../dataset.html#vipy.dataset.Dataset.index">index</a></code></li>
<li><code><a title="vipy.dataset.Dataset.inverse_frequency" href="../dataset.html#vipy.dataset.Dataset.inverse_frequency">inverse_frequency</a></code></li>
<li><code><a title="vipy.dataset.Dataset.list" href="../dataset.html#vipy.dataset.Dataset.list">list</a></code></li>
<li><code><a title="vipy.dataset.Dataset.load" href="../dataset.html#vipy.dataset.Dataset.load">load</a></code></li>
<li><code><a title="vipy.dataset.Dataset.localmap" href="../dataset.html#vipy.dataset.Dataset.localmap">localmap</a></code></li>
<li><code><a title="vipy.dataset.Dataset.map" href="../dataset.html#vipy.dataset.Dataset.map">map</a></code></li>
<li><code><a title="vipy.dataset.Dataset.minibatch" href="../dataset.html#vipy.dataset.Dataset.minibatch">minibatch</a></code></li>
<li><code><a title="vipy.dataset.Dataset.partition" href="../dataset.html#vipy.dataset.Dataset.partition">partition</a></code></li>
<li><code><a title="vipy.dataset.Dataset.pipeline" href="../dataset.html#vipy.dataset.Dataset.pipeline">pipeline</a></code></li>
<li><code><a title="vipy.dataset.Dataset.raw" href="../dataset.html#vipy.dataset.Dataset.raw">raw</a></code></li>
<li><code><a title="vipy.dataset.Dataset.repeat" href="../dataset.html#vipy.dataset.Dataset.repeat">repeat</a></code></li>
<li><code><a title="vipy.dataset.Dataset.sample" href="../dataset.html#vipy.dataset.Dataset.sample">sample</a></code></li>
<li><code><a title="vipy.dataset.Dataset.set" href="../dataset.html#vipy.dataset.Dataset.set">set</a></code></li>
<li><code><a title="vipy.dataset.Dataset.shift" href="../dataset.html#vipy.dataset.Dataset.shift">shift</a></code></li>
<li><code><a title="vipy.dataset.Dataset.shuffle" href="../dataset.html#vipy.dataset.Dataset.shuffle">shuffle</a></code></li>
<li><code><a title="vipy.dataset.Dataset.slice" href="../dataset.html#vipy.dataset.Dataset.slice">slice</a></code></li>
<li><code><a title="vipy.dataset.Dataset.sort" href="../dataset.html#vipy.dataset.Dataset.sort">sort</a></code></li>
<li><code><a title="vipy.dataset.Dataset.split" href="../dataset.html#vipy.dataset.Dataset.split">split</a></code></li>
<li><code><a title="vipy.dataset.Dataset.streaming_map" href="../dataset.html#vipy.dataset.Dataset.streaming_map">streaming_map</a></code></li>
<li><code><a title="vipy.dataset.Dataset.streaming_shuffler" href="../dataset.html#vipy.dataset.Dataset.streaming_shuffler">streaming_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.take" href="../dataset.html#vipy.dataset.Dataset.take">take</a></code></li>
<li><code><a title="vipy.dataset.Dataset.take_fraction" href="../dataset.html#vipy.dataset.Dataset.take_fraction">take_fraction</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takeby" href="../dataset.html#vipy.dataset.Dataset.takeby">takeby</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takelist" href="../dataset.html#vipy.dataset.Dataset.takelist">takelist</a></code></li>
<li><code><a title="vipy.dataset.Dataset.takeone" href="../dataset.html#vipy.dataset.Dataset.takeone">takeone</a></code></li>
<li><code><a title="vipy.dataset.Dataset.truncate" href="../dataset.html#vipy.dataset.Dataset.truncate">truncate</a></code></li>
<li><code><a title="vipy.dataset.Dataset.tuple" href="../dataset.html#vipy.dataset.Dataset.tuple">tuple</a></code></li>
<li><code><a title="vipy.dataset.Dataset.uniform_shuffler" href="../dataset.html#vipy.dataset.Dataset.uniform_shuffler">uniform_shuffler</a></code></li>
<li><code><a title="vipy.dataset.Dataset.zip" href="../dataset.html#vipy.dataset.Dataset.zip">zip</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="VIPY" href="https://github.com/visym/vipy/">
<img src="https://www.visym.com/labs/images/visym_logo_black_notext.png" alt="" width="60">
</a>
<h1 style="font-size:200%;"><b>VIPY:</b> Visual Dataset Transformation</h1>
</header>
<form>
<input id="lunr-search" name="q" placeholder="ðŸ”Ž Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.css" integrity="sha512-j1u8eUJ4f23xPPxwOrLUPQaCD2dwzNqqmDDcWS4deWsMv2ohLqmXXuP3hU7g8TyzbMSakP/mMqoNBYWj8AEIFg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.15.3/tingle.min.js" integrity="sha512-plGUER9JkeEWPPqQBE4sdLqBoQug5Ap+BCGMc7bJ8BXkm+VVj6QzkpBz5Yv2yPkkq+cqg9IpkBaGCas6uDbW8g==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '././doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="vipy.data" href="index.html">vipy.data</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="vipy.data.cap.CAP_classification_clip" href="#vipy.data.cap.CAP_classification_clip">CAP_classification_clip</a></code></h4>
<ul class="">
<li><code><a title="vipy.data.cap.CAP_classification_clip.MD5" href="#vipy.data.cap.CAP_classification_clip.MD5">MD5</a></code></li>
<li><code><a title="vipy.data.cap.CAP_classification_clip.URL" href="#vipy.data.cap.CAP_classification_clip.URL">URL</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="vipy.data.cap.CAP_classification_pad" href="#vipy.data.cap.CAP_classification_pad">CAP_classification_pad</a></code></h4>
<ul class="">
<li><code><a title="vipy.data.cap.CAP_classification_pad.MD5" href="#vipy.data.cap.CAP_classification_pad.MD5">MD5</a></code></li>
<li><code><a title="vipy.data.cap.CAP_classification_pad.URL" href="#vipy.data.cap.CAP_classification_pad.URL">URL</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="vipy.data.cap.CAP_detection" href="#vipy.data.cap.CAP_detection">CAP_detection</a></code></h4>
<ul class="">
<li><code><a title="vipy.data.cap.CAP_detection.MD5" href="#vipy.data.cap.CAP_detection.MD5">MD5</a></code></li>
<li><code><a title="vipy.data.cap.CAP_detection.URL" href="#vipy.data.cap.CAP_detection.URL">URL</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
